<section class="dashboard">
  <div class="dashboard__hero">
    <div class="dashboard__welcome">
      <p class="dashboard__welcome-label">Bienvenue</p>
      <h1 class="dashboard__welcome-title">

        <ng-container *ngIf="!userLoading; else dashboardNameLoading">

          {{ userName }}

        </ng-container>

      </h1>

      <ng-template #dashboardNameLoading>

        <span class="dashboard__welcome-skeleton" aria-hidden="true"></span>

      </ng-template>

     <p class="dashboard__welcome-subtitle">
        Retrouve toutes tes actions importantes au même endroit.
      </p>
    </div>
  </div>

  <div class="dashboard__appointment">
    <div class="dashboard__appointment-header">
      <p>Prochain rendez-vous : </p>
      <span class="badge-new badge-new--confirmed" *ngIf="nextAppointment">Confirmé</span>
    </div>

    <div class="dashboard__appointment-body" *ngIf="!appointmentLoading; else appointmentLoadingTpl">
      <ng-container *ngIf="nextAppointment; else noAppointmentTpl">
        <div class="dashboard__appointment-cover">
          <img [src]="nextAppointment.coverUrl" alt="Service réservé">
        </div>
        <h2>{{ nextAppointment.title }}</h2>
        <p class="dashboard__appointment-date">{{ nextAppointment.dateLabel }}</p>
        <p class="dashboard__appointment-role">{{ nextAppointment.roleLabel }}</p>
        <a class="dashboard__appointment-link" [routerLink]="nextAppointment.route">
          Voir le détail
        </a>
      </ng-container>
    </div>
  </div>

  <section class="dashboard__actions">
    <h2 class="dashboard__section-title">Accès rapides</h2>
    <div class="dashboard__grid">
      <a
        class="dashboard-card"
        [class.dashboard-card--accent]="action.accent"
        [routerLink]="action.route"
        *ngFor="let action of dashboardActions; trackBy: trackByActionId"
      >
        <span *ngIf="action.badge" class="dashboard-card__badge">{{ action.badge }}</span>
        <div class="dashboard-card__icon" [ngSwitch]="action.icon">
          <svg *ngSwitchCase="'services'" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8">
            <path stroke-linecap="round" stroke-linejoin="round" d="m21 21-4.35-4.35M11 19a8 8 0 1 0 0-16 8 8 0 0 0 0 16Z" />
          </svg>
          <svg *ngSwitchCase="'providers'" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8">
            <path stroke-linecap="round" stroke-linejoin="round" d="M16 7a4 4 0 1 1-8 0 4 4 0 0 1 8 0Z" />
            <path stroke-linecap="round" stroke-linejoin="round" d="M4 19c0-3.31 3.13-6 7-6s7 2.69 7 6" />
          </svg>
          <svg *ngSwitchCase="'my-services'" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8">
            <path stroke-linecap="round" stroke-linejoin="round" d="M3 7h18M3 12h18M7 17h10" />
          </svg>
          <svg *ngSwitchCase="'reservations'" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8">
            <rect x="3" y="5" width="18" height="16" rx="2" />
            <path stroke-linecap="round" stroke-linejoin="round" d="M3 10h18M8 3v4M16 3v4" />
          </svg>
          <svg *ngSwitchCase="'appointments'" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8">
            <path stroke-linecap="round" stroke-linejoin="round" d="M5 4h14a2 2 0 0 1 2 2v13l-4-3-4 3-4-3-4 3V6a2 2 0 0 1 2-2Z" />
          </svg>
          <svg *ngSwitchCase="'messages'" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8">
            <path stroke-linecap="round" stroke-linejoin="round" d="M4 5h16v11H7l-3 3z" />
          </svg>
          <svg *ngSwitchCase="'notifications'" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8">
            <path stroke-linecap="round" stroke-linejoin="round" d="M12 5a4 4 0 0 1 4 4v2.764a2 2 0 0 0 .553 1.382l1.6 1.8A1 1 0 0 1 17.4 16H6.6a1 1 0 0 1-.753-1.654l1.6-1.8A2 2 0 0 0 8 11.764V9a4 4 0 0 1 4-4Z" />
            <path stroke-linecap="round" stroke-linejoin="round" d="M10 16a2 2 0 1 0 4 0" />
          </svg>
          <svg *ngSwitchCase="'publish'" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8">
            <path stroke-linecap="round" stroke-linejoin="round" d="M12 5v14M5 12h14" />
          </svg>
          <svg *ngSwitchDefault xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8">
            <circle cx="12" cy="12" r="9" />
          </svg>
        </div>
        <div class="dashboard-card__body">
          <h3>{{ action.title }}</h3>
          <p>{{ action.description }}</p>
        </div>
      </a>
    </div>
  </section>
</section>

<ng-template #appointmentLoadingTpl>
  <p class="dashboard__appointment-empty">Chargement des prochains rendez-vous…</p>
</ng-template>

<ng-template #noAppointmentTpl>
  <div class="dashboard__appointment-empty">
    <p>Aucun rendez-vous confirmé pour le moment.</p>
    <a routerLink="/services" class="dashboard__appointment-link">Réserver un service</a>
  </div>
</ng-template>
